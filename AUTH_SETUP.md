# Настройка аутентификации для ProjectAlfa-FE

## Что добавлено

### 1. Зависимости

- `@headlessui/react` - для модальных окон
- `@heroicons/react` - для иконок
- `axios` - для HTTP запросов
- `react-hook-form` - для управления формами

### 2. Структура файлов

```
src/
├── components/
│   ├── Navigation.tsx      # Навигация с кнопками аутентификации
│   ├── LoginModal.tsx      # Модалка входа
│   └── RegisterModal.tsx   # Модалка регистрации
├── contexts/
│   └── AuthContext.tsx     # Контекст для управления состоянием аутентификации
├── services/
│   └── authService.ts      # Сервис для работы с API
└── types/
    └── auth.ts             # TypeScript типы для аутентификации
```

### 3. Функциональность

- ✅ Кнопки "Войти" и "Регистрация" в правом верхнем углу
- ✅ Модальные окна для входа и регистрации
- ✅ Валидация форм
- ✅ Интеграция с бэкендом ProjectAlfa-BE
- ✅ Сохранение токена в localStorage
- ✅ Автоматическое добавление токена к запросам
- ✅ Отображение информации о пользователе после входа
- ✅ Кнопка выхода для авторизованных пользователей
- ✅ Google OAuth аутентификация (требует настройки)

## Настройка

### 1. Переменные окружения

Создайте файл `.env.local` в корне проекта:

```bash
# Backend API URL
NEXT_PUBLIC_API_URL=http://localhost:3001

# Google OAuth Configuration (для Google аутентификации)
NEXT_PUBLIC_GOOGLE_CLIENT_ID=your_google_client_id_here
```

### 2. Настройка Google OAuth (опционально)

Для работы Google аутентификации:

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект или выберите существующий
3. Включите Google+ API
4. Создайте OAuth 2.0 Client ID
5. Добавьте разрешенные источники JavaScript:
   - `http://localhost:3000` (для разработки)
   - `https://yourdomain.com` (для продакшена)
6. Скопируйте Client ID в `.env.local`

### 3. Запуск бэкенда

Убедитесь, что ProjectAlfa-BE запущен на порту 3001:

```bash
cd ../ProjectAlfa-BE
npm run start:dev
```

### 4. Запуск фронтенда

```bash
npm run dev
```

## API Endpoints

### Регистрация

- **URL**: `POST /auth/register`
- **Body**:
  ```json
  {
  	"email": "user@example.com",
  	"password": "password123",
  	"firstName": "Иван",
  	"lastName": "Иванов"
  }
  ```

### Вход

- **URL**: `POST /auth/login`
- **Body**:
  ```json
  {
  	"email": "user@example.com",
  	"password": "password123"
  }
  ```

### Google OAuth

- **URL**: `POST /auth/google`
- **Body**:
  ```json
  {
  	"credential": "google_jwt_token"
  }
  ```

## Особенности реализации

### 1. Безопасность

- Пароли не сохраняются в localStorage
- JWT токены автоматически добавляются к запросам
- Валидация на стороне клиента

### 2. UX

- Адаптивный дизайн
- Состояния загрузки
- Обработка ошибок
- Автоматическое закрытие модалок после успешной операции

### 3. Архитектура

- React Context для глобального состояния
- Разделение логики на сервисы
- TypeScript для типизации
- Tailwind CSS для стилизации

## Тестирование

1. Откройте http://localhost:3000
2. Нажмите "Регистрация" и создайте нового пользователя
3. Выйдите и войдите с созданными данными
4. Проверьте, что токен сохраняется и пользователь авторизован

### Тестирование Google аутентификации

1. Убедитесь, что `NEXT_PUBLIC_GOOGLE_CLIENT_ID` настроен в `.env.local`
2. Откройте модалку входа
3. Должна появиться кнопка "Sign in with Google"
4. Нажмите на неё и авторизуйтесь через Google
5. Проверьте, что пользователь вошёл в систему

## Возможные улучшения

- ✅ Добавить социальную аутентификацию (Google OAuth реализован)
- Добавить восстановление пароля
- Реализовать "Запомнить меня"
- Добавить другие социальные сети (Facebook, GitHub)
- Улучшить валидацию паролей
- Добавить анимации для модалок
